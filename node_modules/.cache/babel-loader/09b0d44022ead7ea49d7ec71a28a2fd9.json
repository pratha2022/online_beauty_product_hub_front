{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createObservable = void 0;\n\nvar rxjs_1 = require(\"rxjs\");\n\nvar axios_1 = require(\"axios\");\n\nfunction createObservable(promiseFactory) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  var config = args[args.length - 1];\n  config = config ? Object.assign({}, config) : {};\n  args[args.length - 1] = config;\n  var cancelSource;\n  var hasCancelToken = !!config.cancelToken;\n\n  if (hasCancelToken) {\n    console.warn(\"No need to use cancel token, just unsubscribe the subscription would cancel the http request automatically\");\n  }\n\n  var observable = new rxjs_1.Observable(function (subscriber) {\n    if (!hasCancelToken) {\n      cancelSource = axios_1.default.CancelToken.source();\n      config.cancelToken = cancelSource.token;\n    }\n\n    promiseFactory.apply(void 0, args).then(function (response) {\n      subscriber.next(response);\n      subscriber.complete();\n    }).catch(function (error) {\n      return subscriber.error(error);\n    });\n  });\n\n  var _subscribe = observable.subscribe.bind(observable);\n\n  observable.subscribe = function () {\n    var subscription = _subscribe.apply(void 0, arguments);\n\n    var _unsubscribe = subscription.unsubscribe.bind(subscription);\n\n    subscription.unsubscribe = function () {\n      if (cancelSource) {\n        cancelSource.cancel();\n      }\n\n      _unsubscribe();\n    };\n\n    return subscription;\n  };\n\n  return observable;\n}\n\nexports.createObservable = createObservable;","map":{"version":3,"sources":["/media/bytes-pratha/workspaces/projects/online_beauty_product_hub_front/node_modules/axios-observable/dist/create-observable.js"],"names":["Object","defineProperty","exports","value","createObservable","rxjs_1","require","axios_1","promiseFactory","args","config","length","assign","cancelSource","hasCancelToken","cancelToken","console","warn","observable","Observable","subscriber","default","CancelToken","source","token","then","response","next","complete","catch","error","_subscribe","subscribe","bind","subscription","_unsubscribe","unsubscribe","cancel"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,gBAAR,GAA2B,KAAK,CAAhC;;AACA,IAAMC,MAAM,GAAGC,OAAO,CAAC,MAAD,CAAtB;;AACA,IAAMC,OAAO,GAAGD,OAAO,CAAC,OAAD,CAAvB;;AACA,SAASF,gBAAT,CAA0BI,cAA1B,EAAmD;AAAA,oCAANC,IAAM;AAANA,IAAAA,IAAM;AAAA;;AAC/C,MAAIC,MAAM,GAAGD,IAAI,CAACA,IAAI,CAACE,MAAL,GAAc,CAAf,CAAjB;AACAD,EAAAA,MAAM,GAAGA,MAAM,GAAGV,MAAM,CAACY,MAAP,CAAc,EAAd,EAAkBF,MAAlB,CAAH,GAA+B,EAA9C;AACAD,EAAAA,IAAI,CAACA,IAAI,CAACE,MAAL,GAAc,CAAf,CAAJ,GAAwBD,MAAxB;AACA,MAAIG,YAAJ;AACA,MAAMC,cAAc,GAAG,CAAC,CAACJ,MAAM,CAACK,WAAhC;;AACA,MAAID,cAAJ,EAAoB;AAChBE,IAAAA,OAAO,CAACC,IAAR;AACH;;AACD,MAAMC,UAAU,GAAG,IAAIb,MAAM,CAACc,UAAX,CAAsB,UAACC,UAAD,EAAgB;AACrD,QAAI,CAACN,cAAL,EAAqB;AACjBD,MAAAA,YAAY,GAAGN,OAAO,CAACc,OAAR,CAAgBC,WAAhB,CAA4BC,MAA5B,EAAf;AACAb,MAAAA,MAAM,CAACK,WAAP,GAAqBF,YAAY,CAACW,KAAlC;AACH;;AACDhB,IAAAA,cAAc,MAAd,SAAkBC,IAAlB,EAAwBgB,IAAxB,CAA6B,UAAAC,QAAQ,EAAI;AACrCN,MAAAA,UAAU,CAACO,IAAX,CAAgBD,QAAhB;AACAN,MAAAA,UAAU,CAACQ,QAAX;AACH,KAHD,EAIKC,KAJL,CAIW,UAAAC,KAAK;AAAA,aAAIV,UAAU,CAACU,KAAX,CAAiBA,KAAjB,CAAJ;AAAA,KAJhB;AAKH,GAVkB,CAAnB;;AAWA,MAAMC,UAAU,GAAGb,UAAU,CAACc,SAAX,CAAqBC,IAArB,CAA0Bf,UAA1B,CAAnB;;AACAA,EAAAA,UAAU,CAACc,SAAX,GAAuB,YAAc;AACjC,QAAME,YAAY,GAAGH,UAAU,MAAV,mBAArB;;AACA,QAAMI,YAAY,GAAGD,YAAY,CAACE,WAAb,CAAyBH,IAAzB,CAA8BC,YAA9B,CAArB;;AACAA,IAAAA,YAAY,CAACE,WAAb,GAA2B,YAAM;AAC7B,UAAIvB,YAAJ,EAAkB;AACdA,QAAAA,YAAY,CAACwB,MAAb;AACH;;AACDF,MAAAA,YAAY;AACf,KALD;;AAMA,WAAOD,YAAP;AACH,GAVD;;AAWA,SAAOhB,UAAP;AACH;;AACDhB,OAAO,CAACE,gBAAR,GAA2BA,gBAA3B","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createObservable = void 0;\nconst rxjs_1 = require(\"rxjs\");\nconst axios_1 = require(\"axios\");\nfunction createObservable(promiseFactory, ...args) {\n    let config = args[args.length - 1];\n    config = config ? Object.assign({}, config) : {};\n    args[args.length - 1] = config;\n    let cancelSource;\n    const hasCancelToken = !!config.cancelToken;\n    if (hasCancelToken) {\n        console.warn(`No need to use cancel token, just unsubscribe the subscription would cancel the http request automatically`);\n    }\n    const observable = new rxjs_1.Observable((subscriber) => {\n        if (!hasCancelToken) {\n            cancelSource = axios_1.default.CancelToken.source();\n            config.cancelToken = cancelSource.token;\n        }\n        promiseFactory(...args).then(response => {\n            subscriber.next(response);\n            subscriber.complete();\n        })\n            .catch(error => subscriber.error(error));\n    });\n    const _subscribe = observable.subscribe.bind(observable);\n    observable.subscribe = (...args2) => {\n        const subscription = _subscribe(...args2);\n        const _unsubscribe = subscription.unsubscribe.bind(subscription);\n        subscription.unsubscribe = () => {\n            if (cancelSource) {\n                cancelSource.cancel();\n            }\n            _unsubscribe();\n        };\n        return subscription;\n    };\n    return observable;\n}\nexports.createObservable = createObservable;\n"]},"metadata":{},"sourceType":"script"}