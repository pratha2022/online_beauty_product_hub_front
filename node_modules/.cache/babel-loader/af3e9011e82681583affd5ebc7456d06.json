{"ast":null,"code":"import _slicedToArray from\"/media/bytes-pratha/workspaces/projects/online_beauty_product_hub_front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./shop.css';import React,{useEffect,useState}from'react';import eyes from'../../images/abouthead.jpg';import Select from'react-select';import{useLocation,useNavigate}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{categoryAction,priceFilterAction,productFavouriteAction,shopAction}from'../../redux/action/ProductAction';import{catAction}from'../../redux/action/CatAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Shop=function Shop(){var user_id=localStorage.getItem('user_details');var location=useLocation();var search=location.search;var params=new URLSearchParams(search);var categ=params.get('category');var pric=params.get('price');var pop=params.get('popularity');// console.log(\"FILTERSS==\", categ?.split(\" \").pop(),categ?.split(\" \").shift(), pric, pop);\n// const [fav, setfav] = useState([])\nvar navigate=useNavigate();localStorage.setItem('location',location.pathname);var dispatch=useDispatch();var data=useSelector(function(state){return state.shop.shop;});// console.log('------>',data)\nvar category=useSelector(function(state){return state.category.category;});// console.log('--.........>',category)\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),categoryFilter=_useState2[0],setCategoryFilter=_useState2[1];// console.log(\"**********\", categoryFilter);\nvar URL=\"http://192.168.10.167:1337\";var cat=categ===null||categ===void 0?void 0:categ.split(' ').shift();var catval=categ===null||categ===void 0?void 0:categ.split(' ').pop();var categories=category.map(function(item){return{'label':item.attributes.title,'value':item.attributes.title,'id':item.id};});var price=[{'label':\"Low to High\",'value':\"Low to High\"},{'label':\"High to Low\",'value':\"High to Low\"}];var prices=price.map(function(item){return{'label':item.label,'value':item.value};});var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),priceFilter=_useState4[0],setPriceFilter=_useState4[1];var popularity=[{'label':\"Highest\",'value':'Highest'},{'label':\"Lowest\",'value':'Lowest'}];var popularities=popularity.map(function(item){return{'label':item.label,'value':item.value};});var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),popularityFilter=_useState6[0],setPopularityFilter=_useState6[1];useEffect(function(){dispatch(catAction());if(categ===null&&pric===null&&pop===null){dispatch(shopAction());}else if(categ!==null){setCategoryFilter({'value':catval,'label':catval});dispatch(categoryAction(cat));if(pric!==null){setPriceFilter({'value':pric,'label':pric});dispatch(priceFilterAction(pric,cat));if(cat!==null){dispatch(priceFilterAction(pric,cat));// dispatch(categoryAction(cat))\n}}}else if(pop!==null){setPopularityFilter({'value':pop,'label':pop});}},[]);var handleChange=function handleChange(event){var queryParam={category:event.id+\" \"+event.value,price:new URLSearchParams(search).get('price')||\"\",popularity:new URLSearchParams(search).get('popularity')||\"\"};var urlParam=new URLSearchParams(queryParam).toString();setCategoryFilter({'value':event.value,'label':event.label});dispatch(categoryAction(event.id));navigate({pathname:'/productlist',search:\"?\".concat(urlParam)});};var filterHandler=function filterHandler(event){var search=location.search;var queryParam={category:new URLSearchParams(search).get('category')||\"\",price:event.value,popularity:new URLSearchParams(search).get('popularity')||\"\"};var urlParam=new URLSearchParams(queryParam).toString();// setFilters(filters=> filters.price= event.value)\nsetPriceFilter({'value':event.value,'label':event.label});dispatch(priceFilterAction(event.value,queryParam.category));navigate({pathname:'/productlist',search:\"?\".concat(urlParam)});};var popularityHandler=function popularityHandler(event){var search=location.search;var queryParam={category:new URLSearchParams(search).get('category')||\"\",price:new URLSearchParams(search).get('price')||\"\",popularity:event.value};var urlParam=new URLSearchParams(queryParam).toString();setPopularityFilter({'value':event.value,'label':event.label});navigate({pathname:'/productlist',search:\"?\".concat(urlParam)});};var addtoFav=function addtoFav(item){dispatch(productFavouriteAction(item,onSuccess));};var onSuccess=function onSuccess(){navigate(\"/favouriteitemlist/\".concat(user_id));window.scrollTo(0,0);};return/*#__PURE__*/_jsxs(\"div\",{className:\"shop\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:eyes,className:\"eyes\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"heading\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shop\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"a\",{className:\"text\",children:\"Home\"}),\" | Shop\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",style:{fontSize:'x-large'},children:/*#__PURE__*/_jsx(\"strong\",{children:\"OUR PRODUCTS\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col filters\",children:/*#__PURE__*/_jsx(Select,{options:categories,value:categoryFilter,placeholder:\"Categories\",onChange:handleChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",children:/*#__PURE__*/_jsx(Select,{options:prices,value:priceFilter,placeholder:\"Filter by Price\",onChange:filterHandler})}),/*#__PURE__*/_jsx(\"div\",{className:\"col filters\",children:/*#__PURE__*/_jsx(Select,{options:popularities,value:popularityFilter,placeholder:\"Sort by Popularity\",onChange:popularityHandler})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-group d-flex flex-wrap\",children:data===null||data===void 0?void 0:data.map(function(item){var _item$attributes,_item$attributes$prod,_item$attributes$prod2,_item$attributes$prod3;return/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{\"margin\":\"auto\"},children:[/*#__PURE__*/_jsx(\"img\",{className:\"shopimg\",src:\"\".concat(URL).concat(item===null||item===void 0?void 0:(_item$attributes=item.attributes)===null||_item$attributes===void 0?void 0:(_item$attributes$prod=_item$attributes.productImage)===null||_item$attributes$prod===void 0?void 0:(_item$attributes$prod2=_item$attributes$prod.data)===null||_item$attributes$prod2===void 0?void 0:(_item$attributes$prod3=_item$attributes$prod2.attributes)===null||_item$attributes$prod3===void 0?void 0:_item$attributes$prod3.url),alt:\"Card image cap\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"middle\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-eye\",\"aria-hidden\":\"true\",onClick:function onClick(){navigate(\"/productDetails/\".concat(item.id));window.scrollTo(0,0);}}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-heart\",\"aria-hidden\":\"true\",onClick:function onClick(){return addtoFav(item);}}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-shopping-cart\",\"aria-hidden\":\"true\",onClick:function onClick(){return navigate(\"/yourcart/\".concat(item.id));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",style:{\"color\":\"black\"},children:item.attributes.productTitle}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:/*#__PURE__*/_jsxs(\"small\",{children:[\"\\u20B9\",item.attributes.price]})})]})]})},item.id);})})]});};export{Shop};","map":{"version":3,"sources":["/media/bytes-pratha/workspaces/projects/online_beauty_product_hub_front/src/screens/shop/Shop.tsx"],"names":["React","useEffect","useState","eyes","Select","useLocation","useNavigate","useDispatch","useSelector","categoryAction","priceFilterAction","productFavouriteAction","shopAction","catAction","Shop","user_id","localStorage","getItem","location","search","params","URLSearchParams","categ","get","pric","pop","navigate","setItem","pathname","dispatch","data","state","shop","category","categoryFilter","setCategoryFilter","URL","cat","split","shift","catval","categories","map","item","attributes","title","id","price","prices","label","value","priceFilter","setPriceFilter","popularity","popularities","popularityFilter","setPopularityFilter","handleChange","event","queryParam","urlParam","toString","filterHandler","popularityHandler","addtoFav","onSuccess","window","scrollTo","fontSize","productImage","url","productTitle"],"mappings":"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","sourcesContent":["import './shop.css'\nimport React, { useEffect, useState } from 'react'\nimport eyes from '../../images/abouthead.jpg'\nimport Select from 'react-select'\nimport { useLocation, useNavigate, useParams, useSearchParams } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { categoryAction, priceFilterAction, productAction, productFavouriteAction, shopAction } from '../../redux/action/ProductAction'\nimport { catAction } from '../../redux/action/CatAction'\n\nconst Shop = () => {\n  const user_id = localStorage.getItem('user_details')\n  const location = useLocation()\n  const search = location.search;\n  const params = new URLSearchParams(search);\n  const categ = params.get('category');\n  const pric = params.get('price')\n  const pop = params.get('popularity')\n  // console.log(\"FILTERSS==\", categ?.split(\" \").pop(),categ?.split(\" \").shift(), pric, pop);\n  // const [fav, setfav] = useState([])\n  const navigate = useNavigate()\n  localStorage.setItem('location', location.pathname);\n  const dispatch = useDispatch();\n  const data = useSelector((state: any) => state.shop.shop);\n  // console.log('------>',data)\n  const category = useSelector((state: any) => state.category.category)\n  // console.log('--.........>',category)\n  const [categoryFilter, setCategoryFilter]: any = useState('');\n  // console.log(\"**********\", categoryFilter);\n  const URL = \"http://192.168.10.167:1337\";\n  let cat = categ?.split(' ').shift()\n  let catval = categ?.split(' ').pop()\n  const categories = category.map((item: any) => {\n    return ({ 'label': item.attributes.title, 'value': item.attributes.title, 'id': item.id })\n  })\n  const price = [\n    { 'label': \"Low to High\", 'value': \"Low to High\" },\n    { 'label': \"High to Low\", 'value': \"High to Low\" }\n  ];\n  const prices = price.map((item) => {\n    return ({ 'label': item.label, 'value': item.value })\n  })\n  const [priceFilter, setPriceFilter]: any = useState('')\n  const popularity = [\n    { 'label': \"Highest\", 'value': 'Highest' },\n    { 'label': \"Lowest\", 'value': 'Lowest' }\n  ]\n  const popularities = popularity.map((item) => {\n    return ({ 'label': item.label, 'value': item.value })\n  })\n  const [popularityFilter, setPopularityFilter]: any = useState('')\n  useEffect(() => {\n    dispatch(catAction())\n    if ((categ === null) && (pric === null) && (pop === null)) {\n      dispatch(shopAction())\n    }\n    else if (categ !== null) {\n      setCategoryFilter({ 'value': catval, 'label': catval })\n      dispatch(categoryAction(cat))\n      if (pric !== null) {\n        setPriceFilter({ 'value': pric, 'label': pric })\n        dispatch(priceFilterAction(pric, cat))\n        if (cat !== null) {\n          dispatch(priceFilterAction(pric, cat))\n          // dispatch(categoryAction(cat))\n        }\n      }\n    }\n    else if (pop !== null) {\n      setPopularityFilter({ 'value': pop, 'label': pop })\n    }\n\n  }, []);\n  const handleChange = (event: any) => {\n    const queryParam = {\n      category: event.id + \" \" + event.value,\n      price: new URLSearchParams(search).get('price') || \"\",\n      popularity: new URLSearchParams(search).get('popularity') || \"\"\n    }\n    let urlParam = new URLSearchParams(queryParam).toString();\n    setCategoryFilter({ 'value': event.value, 'label': event.label })\n    dispatch(categoryAction(event.id))\n    navigate({\n      pathname: '/productlist',\n      search: `?${urlParam}`\n    });\n  }\n\n  const filterHandler = (event: any) => {\n    const search = location.search;\n    const queryParam = {\n      category: new URLSearchParams(search).get('category') || \"\",\n      price: event.value,\n      popularity: new URLSearchParams(search).get('popularity') || \"\"\n    }\n    let urlParam = new URLSearchParams(queryParam).toString();\n    // setFilters(filters=> filters.price= event.value)\n    setPriceFilter({ 'value': event.value, 'label': event.label })\n    dispatch(priceFilterAction(event.value, queryParam.category))\n    navigate({\n      pathname: '/productlist',\n      search: `?${urlParam}`\n    });\n  }\n  const popularityHandler = (event: any) => {\n    const search = location.search;\n    const queryParam = {\n      category: new URLSearchParams(search).get('category') || \"\",\n      price: new URLSearchParams(search).get('price') || \"\",\n      popularity: event.value\n    }\n    let urlParam = new URLSearchParams(queryParam).toString();\n    setPopularityFilter({ 'value': event.value, 'label': event.label })\n    navigate({\n      pathname: '/productlist',\n      search: `?${urlParam}`\n    });\n  }\n  const addtoFav = (item: any) => {\n    dispatch(productFavouriteAction(item, onSuccess))\n  }\n  const onSuccess = () => {\n    navigate(`/favouriteitemlist/${user_id}`)\n    window.scrollTo(0, 0)\n  }\n  return (\n    <div className='shop'>\n      <div>\n        <img src={eyes} className=\"eyes\" />\n      </div>\n      <div className='heading'>\n        <h3>Shop</h3>\n        <p><a className='text'>Home</a> | Shop</p>\n      </div>\n      <div className='card-group'>\n        <div className='col-3' style={{ fontSize: 'x-large' }}><strong>OUR PRODUCTS</strong></div>\n        <div className='col filters'>\n          <Select options={categories} value={categoryFilter} placeholder=\"Categories\" onChange={handleChange} />\n        </div>\n        <div className='col-3'>\n          <Select options={prices} value={priceFilter} placeholder=\"Filter by Price\" onChange={filterHandler} />\n        </div>\n        <div className='col filters'>\n          <Select options={popularities} value={popularityFilter} placeholder=\"Sort by Popularity\" onChange={popularityHandler} />\n        </div>\n      </div>\n      <div className='card-group d-flex flex-wrap'>\n        {data?.map(((item: any) => {\n          return (\n            <div className=\"col-3\" key={item.id} >\n              <div className=\"card\" style={{ \"margin\": \"auto\" }}>\n                <img className=\"shopimg\" src={`${URL}${item?.attributes?.productImage?.data?.attributes?.url}`} alt=\"Card image cap\" />\n                <div className='middle'>\n                  <i className=\"fa fa-eye\" aria-hidden=\"true\" onClick={() => { navigate(`/productDetails/${item.id}`); window.scrollTo(0, 0) }}></i>\n                  <i className=\"fa fa-heart\" aria-hidden=\"true\" onClick={() => addtoFav(item)}></i>\n                  <i className=\"fa fa-shopping-cart\" aria-hidden=\"true\" onClick={() => navigate(`/yourcart/${item.id}`)}></i>\n                </div>\n                <div className=\"card-body\">\n                  <p className=\"card-text\" style={{ \"color\": \"black\" }}>{item.attributes.productTitle}</p>\n                  <p className=\"card-text\"><small >₹{item.attributes.price}</small></p>\n                </div>\n              </div>\n            </div>\n          )\n        }))}\n      </div>\n    </div>\n  )\n}\nexport { Shop }"]},"metadata":{},"sourceType":"module"}